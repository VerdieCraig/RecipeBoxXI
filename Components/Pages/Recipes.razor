@page "/recipes"

<h1>Recipes</h1>

What would you like to make today?

@if (recipes == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <table class="table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Category</th>
                <th>Servings</th>
                <th>Prep Time</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var recipe in recipes)
            {
                <tr>
                    <td>
                    <td><a href="/recipes/@recipe.Recipe_Id.ToString()"> @recipe.Recipe_Name </a></td>
                    </td>                    
                    <td>@recipe.Recipe_Category</td>
                    <td>@recipe.Recipe_Servings</td>
                    <td>@recipe.Recipe_PrepTime min</td>
                </tr>
            }
        </tbody>
    </table>
}

@code {
    private Recipe[]? recipes;

    protected override async Task OnInitializedAsync()
    {
        // Simulate asynchronous loading to demonstrate a loading indicator
        await Task.Delay(500);

        recipes = GetTestRecipes();
    }

    // Hardcoded Test Data Instead of Bogus
    private Recipe[] GetTestRecipes()
    {
        return new[]
        {
            new Recipe
            {
                Recipe_Id = Guid.NewGuid(),
                Recipe_Name = "Spaghetti Bolognese",
                Recipe_Ingredients = "Pasta, Ground Beef, Tomato Sauce, Garlic",
                Recipe_Directions = "1. Cook pasta. 2. Prepare sauce. 3. Mix and serve.",
                Recipe_Category = "Italian",
                Recipe_Servings = 4,
                Recipe_PrepTime = 30
            },
            new Recipe
            {
                Recipe_Id = Guid.NewGuid(),
                Recipe_Name = "Chicken Stir-Fry",
                Recipe_Ingredients = "Chicken, Bell Peppers, Soy Sauce, Rice",
                Recipe_Directions = "1. Sauté chicken. 2. Add vegetables. 3. Serve over rice.",
                Recipe_Category = "Asian",
                Recipe_Servings = 2,
                Recipe_PrepTime = 20
            },
            new Recipe
            {
                Recipe_Id = Guid.NewGuid(),
                Recipe_Name = "Pancakes",
                Recipe_Ingredients = "Flour, Eggs, Milk, Sugar",
                Recipe_Directions = "1. Mix ingredients. 2. Cook on griddle. 3. Serve with syrup.",
                Recipe_Category = "Breakfast",
                Recipe_Servings = 3,
                Recipe_PrepTime = 15
            }
        };
    }

    private class Recipe
    {
        public Guid Recipe_Id { get; set; }
        public string Recipe_Name { get; set; }
        public string Recipe_Ingredients { get; set; }
        public string Recipe_Directions { get; set; }
        public string Recipe_Category { get; set; }
        public int Recipe_Servings { get; set; }
        public int Recipe_PrepTime { get; set; }
    }
}
